<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>node-auth-fastify</title>
  </head>

  <body>
    <h1>ðŸ‘‹ Welcome</h1>
    <h3>Registration Form</h3>
    <form id="registration-form" action="/api/v1/accounts/register" method="POST">
      <input
        id="email"
        type="email"
        placeholder="Email"
        aria-label="Email Address"
      />
      <input
        id="password"
        type="password"
        placeholder="Password"
        aria-label="Password"
      />
      <button type="submit">Register</button>
    </form>

    <script type="application/javascript">
      const $ = document.querySelector.bind(document);
      const form = $('#registration-form');
      const email = $('#email');
      const password = $('#password');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        try {
          const res = await fetch(form.action, {
            method: form.method,
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              email: email.value,
              password: password.value,
            }),
          });

          const body = await res.json();

          console.log(body);
        } catch (err) {
          console.error(err.message);
        }
      });
    </script>
  </body>
</html>
